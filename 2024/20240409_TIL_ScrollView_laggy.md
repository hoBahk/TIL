# ScrollView 화면 끊기는 이슈

## 문제상황

하나의 뷰에 ScrollViewReader를 사용하여 해당 뷰로 스크롤을 이동시키는 기능과 오프셋을 알기 위해 onPreferenceChange를 사용하여 오프셋의 변화를 감지하는 기능을 넣었다.

처음에는 잘됐다. 그런데 테스트기기를 아이폰 XS로 하니까 스크롤 할 때 버벅이기 시작했다.   
CPU가 40-50퍼 정도 차는데 눈의 많이 보일만큼 버벅였다.
   
## 해결과정
그래서 LazyVStack을 사용하여 성능을 개선하려고 하였다. 하지만 ScrollViewReader를 통해 태그를 누르면 해당 아이템으로 스크롤이 이동하는 형태인데 LazyVStack으로 하니 아래의 뷰가 아직 생성되지 않아 태그를 눌러도 반응하지 않았다.   

하려고 했던 기능은 Top버튼인데 offset이 0일 때는 보이지 않도록 하려고 offset을 감지하고 있었다.  
그런데 성능 문제로 인해 offset을 감지 하지 않고 가장 위에 있는 뷰를 LazyVStack으로 하고 해당 뷰가 onAppear되면 Top 버튼을 보여주지 않고 onDisAppear가 되면 Top 버튼을 보여주도록 한다.   

더 좋은 방법이 있지 않을까 싶은데 일단은 이게 최선이었다..
이것은 Top 뷰만 알면 되니까 이렇게 해결이 되는데 정말 offset을 감지해야한다면 다른 방법의 해결이 있어야 할 것이다.