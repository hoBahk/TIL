# Singleton

다시 보는 싱글톤...!


## 사용방법

```swift
struct User {
    static let shared = User()
    
    private init() { }
}
```

`shared`프로퍼티를 통해서 싱글톤에 접근할 수 있고 싱글톤은 인스터스를 만들 필요가 없기 때문에 이니셜라이저를 private으로 두어 인스턴스화 하지 못하게 막는다.


## 장단점
### 장점
- 한 번의 인스턴스만 생성하므로 메모리 낭비를 방지할 수 있다. 
- 다른 클래스들과 자원 공유가 쉽다.
- 공통된 객체를 여러개 생성해서 사용해야하는 상황에서 사용하면 좋다.  

### 단점
- 싱글톤 객체가 너무 많은 일을 하거나, 많은 데이터를 공유시킬 경우 다른 클래의 인스턴스들 간의 결합도가 높아져 개방 폐쇄의 원칙을 위배한다.   
- 그래서 수정과 테스트가 어려워진다.


## Swift의 Singlton
옵젝씨에서는 싱글톤을 생성할 때 dispatch_one을 이용해 싱클톤 생성하는 작업을 한번만 하게 하도록 했다. 왜냐하면 멀티쓰레드 환경에서는 동시에 싱글톤객체를 생성하게 되면 한번에 여러개의 인스턴스가 생길 수 있기 떄문이다.  
즉 thread-safe 하지 않는다.  

하지만 Swift에서는 이러한 작업들을 신경쓰지 않아도 알아서 해준다.   