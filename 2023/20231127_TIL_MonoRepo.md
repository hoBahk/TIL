# Monorepo

## Monolithic Application
- 모듈화 없이 모든 구성요소가 한 프로젝트 안에 통합된 소프트웨어 어플리케이션.   
- DB 커넥션을 맺고, 데이터를 요청하며, 화면을 그리는 로직이 한 프로젝트 안에 구현된 초기 웹 서비스를 모놀리식 애플케이션으로 볼 수 있다.

### 장점
- 소수의 개발자가 빠르게 개발할 수 있다.

### 단점
- 관심사 분리가 어렵기 때문에 설계, 리팩토링이 어렵다.
- 매번 거대한 프로젝트를 배포해야함
- 일부분의 에러가 전체 서비스에 영향을 줄 수 있다.


## Multirepo(Polyrepo)
- 모놀리식 애플리케이션을 모듈화하여 별도의 저장소에 관리하는 구조
- 개발, 테스트, 빌드 배포 등이 각각 존재한다.
- 현재 가장 보편적으로 사용된다. 
- 하나의 서비스는 하나의 저장소에서 관리하는 형태이다.

### 장점
- 다른 프로젝트와 의존성을 갖고 있지 않아 독립적으로 개발이 가능하다.
- 모듈화로 인해 관심사 분리가 용이하다.
- 강한 오너쉽

### 단점
- 각 프로젝트의 코드 컨벤션 통일이 어렵다.
- 코드 재사용이 어려워 중복 코드가 만들어질 가능성이 높음
- 관리 포인트 증가


## Monorepo
- 하나의 저장소에 여러 프로젝트를 관리하는 구조이다.

### 장점
- 여러 프로젝트 간의 코드 재사용이 용이하다.
- 모노레포 내 프로젝트를 담당 개발자 간에 협업이 쉽다. (컨벤션 등)
- 통합된 개발환경 및 DevOps 구성
- 새프로젝트 또한 쉽게 만들 수 있다.

### 단점
- CI 속도 저하 가능성이 있다.
- 의존성 연결이 쉽기 때문에 필요 이상의 의존관계가 나타날 수 있다.
- 하나의 CI를 구성하기 위한 어려움이 있다. (분삭 작업 실행, 빌드 혹은 테스트 로컬 캐싱)
- 무분별한 리펙토링 가능성이 있다.


## 모노레포를 사용하면 좋을 때
모노레포의 최고 장점은 프로젝트 사이에 코드 공유가 가능하는 것이다. 이것을 최대한 활용할 수 있을 떄 사용하는 것이 좋다.

- 유사한 서비스를 만들 떄
- 여러 프로젝트를 한 눈에 파악해야할 때
- 동일한 개발자 경험을 느껴야 할 때: 린트 프리티어 설정 등



## 느낀점
현재 회사에서는 모놀리식으로 하고 있다.   
하나의 서비스에 하나의 레포지토리가 있으며, 네트워크, 비즈니스로직, UI가 하나의 프로젝트에 들어있다. 
말로만 모듈화 해야지 모듈화 해야지 생각만 하고 있다가 모노레포라는 것을 제대로 공부하게 되었는데 멀티레포나 모노레포 둘 다 상황에 맞게 쓰면 좋은 방식으로 보인다.   
일단 회사의 프로젝트는 크지 않아서 모놀로식으로 해도 큰 문제가 없기는 하지만 서비스가 3개정도 되기 때문에 그 중에 코드가 중복되는 것이 있긴 하다.     
그런데 모노레포는 많은 프로젝트가 하나의 레포에 있다는 것이 장점도 물론 많지만 우리 회사에서는 일단 코드의 변화가 많지 않고 팀원이 한명이기 때문에.. 협업의 장점을 살릴 수 없고 현재 모놀로식으로 되어 있기 때문에 변경하려면 세팅에 대한 리소스가 많이 든다.   
그래서 현재는 모놀리식이 오히려 편할 수 있다.     
하지만 추후 팀원이 늘어날 수도 있고 새로운 서비스가 또 생길 수 있기 때문에 모노레포나 멀티레포를 고려해볼만 하다.   
현재 앱 레포의 구조가 있기 때문에 모노레포는 리소스가 많이 필요할듯 보이고, 현재 구조에서 모튤화를 프로젝트 단위로 가져가면서 멀티레포 쪽으로 가는 것이 리소스 대비 효과를 누릴 수 있을 것으로 보인다.   



### 참고
[모노레포 블로그글 1](https://velog.io/@dbwjd5864/%EC%9A%B0%EC%95%84%EC%BD%98-2022-%EC%9A%B0%EB%A6%AC%EB%8A%94-%ED%95%98%EB%82%98%EB%8B%A4-%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC-with-pnpm)  
[모노레포 블로그글 2](https://medium.com/hcleedev/dev-monorepo-%EA%B0%9C%EB%85%90-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-33fd3ce2b767)   
[모노레포 블로그글 3](https://beomy.github.io/tech/etc/monorepo-concept/)   
